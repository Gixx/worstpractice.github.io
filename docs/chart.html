<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Chart</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <meta name="language" content="en">
    <meta name="robots" content="index,follow">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i">
    <style type="text/css">
        :root {
            --color-beginner: #FF4500;
            --color-junior: #FFFF00;
            --color-experienced:#ADFF2F;
            --color-senior:#228B22;
            --color-expert:#006400;
            --color-fadeout:rgba(0,0,0,0);
        }

        * {
            box-sizing: border-box;
        }

        .chartComponent {
            border: 1px solid gray;
            width: 625px;
            margin: 20px 0;
            background-color: white;
        }

        .chartComponent .title {
            font-family: Roboto, sans-serif;
            text-align: center;
            font-size: 20px;
            line-height: 30px;

        }

        .chartComponent .grid {
            position: relative;
            display: inline-block;
            width: calc(100% - 90px);
            padding: 10px 10px 110px 10px;
            overflow: hidden;
        }

        .chartComponent .legend {
            display: inline-block;
            width: 80px;
            vertical-align: top;
            padding-top: 50px;
        }

        .chartComponent .legend span {
            display: block;
            font-family: Roboto, sans-serif;
            font-size: 10px;
            line-height: 15px;
            margin-bottom: 5px;
        }

        .chartComponent .legend span::before {
            display: inline-block;
            width: 10px;
            height: 10px;
            margin-right: 5px;
            content: '';
            vertical-align: middle;
        }

        .chartComponent .legend span.beginner::before {
            background-color: var(--color-beginner);
        }

        .chartComponent .legend span.junior::before {
            background-color: var(--color-junior);
        }

        .chartComponent .legend span.experienced::before {
            background-color: var(--color-experienced);
        }

        .chartComponent .legend span.senior::before {
            background-color: var(--color-senior);
        }

        .chartComponent .legend span.expert::before {
            background-color: var(--color-expert);
        }

        .chartComponent .gridRow {
            width: calc(100% - 55px);
            height: 5px;
            border-bottom: 1px solid lightgray;
            margin-left: 55px;
        }

        .chartComponent .gridRow.year {
            width: calc(100% - 40px);
            margin-left: 40px;
        }

        .chartComponent .gridRow.thisQuarter {
            border-bottom-color: lightcoral;
        }

        .chartComponent .gridRow span {
            display: inline-block;
            width: 40px;
            text-align: right;
            color: lightgray;
            line-height: 16px;
            font-size: 13px;
            font-family: Roboto, sans-serif;
            margin-left: -45px;
        }

        .chartComponent .labels {
            display: block;
            transform: rotate(-90deg) translateX(-110px) translateY(-30px);
            transform-origin: top left;
            width: 150px;
            height: 0;
            overflow: visible;
            text-align: right;
        }

        .chartComponent .labels div {
            transform: rotate(45deg);
            font-family: Roboto, sans-serif;
            font-size: 11px;
            line-height: 20px;
            height: 50px;
            transform-origin: top left;
        }

        .chartComponent .skill {
            position: absolute;
            width: 10px;
            z-index: 5;
            background: lightgray;
        }

        .chartComponent .skill.col1 {
            left: 80px;
        }

        .chartComponent .skill.col2 {
            left: 130px;
        }

        .chartComponent .skill.col3 {
            left: 180px;
        }

        .chartComponent .skill.col4 {
            left: 230px;
        }

        .chartComponent .skill.col5 {
            left: 280px;
        }

        .chartComponent .skill.col6 {
            left: 330px;
        }

        .chartComponent .skill.col7 {
            left: 380px;
        }

        .chartComponent .skill.col8 {
            left: 430px;
        }

        .chartComponent .skill.col9 {
            left: 480px;
        }

        .chartComponent .skill.beginner-expert {
            background: linear-gradient(to bottom, var(--color-expert) 0%, var(--color-senior) 25%, var(--color-experienced) 50%, var(--color-junior) 75%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner-senior {
            background: linear-gradient(to bottom, var(--color-senior) 0%, var(--color-experienced) 33%, var(--color-junior) 66%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner-senior-fade {
            background: linear-gradient(to bottom, var(--color-fadeout) 0%, var(--color-senior) 5%, var(--color-experienced) 40%, var(--color-junior) 70%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner-experienced {
            background: linear-gradient(to bottom, var(--color-experienced) 0%, var(--color-junior) 50%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner-experienced-fade {
            background: linear-gradient(to bottom, var(--color-fadeout) 0%, var(--color-experienced) 5%, var(--color-junior) 55%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner-junior {
            background: linear-gradient(to bottom, var(--color-junior) 0%, var(--color-beginner) 100%);
        }

        .chartComponent .skill.beginner {
            background: var(--color-beginner);
        }

        .chartComponent .skill.beginner-fade {
            background: linear-gradient(to bottom, var(--color-fadeout) 0%, var(--color-beginner) 85%, var(--color-beginner) 100%);
        }
    </style>
</head>
<body>
<div class="chartComponent">
    <div class="title">Languages</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="1998">
            <dt>HTML 3/4/5</dt>
            <dd data-from="1998/Q3" data-to="today" data-skill="beginner-expert"></dd>

            <dt>CSS 1/2/3</dt>
            <dd data-from="1998/Q3" data-to="today" data-skill="beginner-expert"></dd>

            <dt>JavaScript</dt>
            <dd data-from="1999/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>Ansi C</dt>
            <dd data-from="1998/Q4" data-to="2004/Q4" data-skill="beginner-fade"></dd>

            <dt>Java</dt>
            <dd data-from="2002/Q3" data-to="2004/Q4" data-skill="beginner-fade"></dd>

            <dt>PHP 4/5/7</dt>
            <dd data-from="1999/Q4" data-to="today" data-skill="beginner-expert"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<div class="chartComponent">
    <div class="title">Frontend Technologies</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="1999">
            <dt>Native JavaScript</dt>
            <dd data-from="1999/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>jQuery</dt>
            <dd data-from="2006/Q3" data-to="today" data-skill="beginner-expert"></dd>

            <dt>ExtJS (v1)</dt>
            <dd data-from="2014/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>Node JS/npm</dt>
            <dd data-from="2015/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>Material Degisn Lite</dt>
            <dd data-from="2016/Q4" data-to="today" data-skill="beginner-senior"></dd>

            <dt>Grunt/Webpack</dt>
            <dd data-from="2014/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>Sass/Less</dt>
            <dd data-from="2013/Q2" data-to="today" data-skill="beginner-experienced"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<div class="chartComponent">
    <div class="title">PHP Experience</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="2005">
            <dt>OOP in general</dt>
            <dd data-from="2006/Q3" data-to="today" data-skill="beginner-expert"></dd>

            <dt>Wordpress</dt>
            <dd data-from="2006/Q1" data-to="today" data-skill="beginner-experienced-fade"></dd>

            <dt>Zend Framework 1</dt>
            <dd data-from="2008/Q1" data-to="today" data-skill="beginner-expert"></dd>

            <dt>Zend Framework 2</dt>
            <dd data-from="2012/Q3" data-to="2016/Q4" data-skill="beginner-senior-fade"></dd>

            <dt>Zend Expressive</dt>
            <dd data-from="2016/Q2" data-to="today" data-skill="beginner-junior"></dd>

            <dt>Yii 1</dt>
            <dd data-from="2014/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>Symfony 1-4 / components</dt>
            <dd data-from="2014/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>S.O.L.I.D</dt>
            <dd data-from="2016/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>PSR-7 / Middleware</dt>
            <dd data-from="2016/Q1" data-to="today" data-skill="beginner-senior"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<div class="chartComponent">
    <div class="title">PHP Code Quality / Debug</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="2009">
            <dt>PHP Unit</dt>
            <dd data-from="2010/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>PHP Xdebug</dt>
            <dd data-from="2009/Q2" data-to="today" data-skill="beginner-senior"></dd>

            <dt>PHPStan</dt>
            <dd data-from="2018/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>PHP CS</dt>
            <dd data-from="2016/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>PHP MD</dt>
            <dd data-from="2016/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>PHP Lint</dt>
            <dd data-from="2012/Q3" data-to="today" data-skill="beginner-experienced"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<div class="chartComponent">
    <div class="title">OS Knowledge and Tools</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="1998">
            <dt>Windows</dt>
            <dd data-from="1998/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>*nix</dt>
            <dd data-from="1999/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>bash/SSH/awk/etc.</dt>
            <dd data-from="1999/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>CVS/SVN/Git</dt>
            <dd data-from="2005/Q3" data-to="today" data-skill="beginner-senior"></dd>

            <dt>CD/CI (Jenkins...)</dt>
            <dd data-from="2009/Q2" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>VM/Vagrant/Docker</dt>
            <dd data-from="2010/Q1" data-to="today" data-skill="beginner-experienced"></dd>

            <dt>AWS/Cloud/K8s</dt>
            <dd data-from="2016/Q3" data-to="today" data-skill="beginner"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<div class="chartComponent">
    <div class="title">IDEs / Editors</div>
    <div class="grid">
        <dl class="chart-dataset" data-rangefrom="2000">
            <dt>Notepad++/PSPad</dt>
            <dd data-from="2000/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>Eclipse</dt>
            <dd data-from="2004/Q2" data-to="2011/Q4" data-skill="beginner-senior-fade"></dd>

            <dt>Netbeans</dt>
            <dd data-from="2010/Q1" data-to="2014/Q2" data-skill="beginner-senior-fade"></dd>

            <dt>PHPStorm</dt>
            <dd data-from="2014/Q1" data-to="today" data-skill="beginner-senior"></dd>

            <dt>Atom/Sublime/Emacs</dt>
            <dd data-from="2013/Q4" data-to="2017/Q3" data-skill="beginner-fade"></dd>

            <dt>vim</dt>
            <dd data-from="2016/Q3" data-to="today" data-skill="beginner-junior"></dd>
        </dl>
    </div>
    <div class="legend">
        <span class="expert">Expert</span>
        <span class="senior">Senior</span>
        <span class="experienced">Experienced</span>
        <span class="junior">Junior</span>
        <span class="beginner">Beginner</span>
    </div>
</div>

<script type="application/javascript">
    const currentYear = (new Date()).getFullYear();
    const currentQurater = Math.ceil(((new Date()).getMonth() + 1) / 4);

    (function() {
        const chartWrappers = document.querySelectorAll('.chartComponent .grid');
        const chartStyles = readStylesheets();
        const startOffset = parseInt(chartStyles['.chartComponent .grid'].paddingBottom.replace(/px/, ''));
        const rowHeight = parseInt(chartStyles['.chartComponent .gridRow'].height.replace(/px/, ''));

        for (let index in chartWrappers) {
            if (chartWrappers.hasOwnProperty(index)) {
                initChart(chartWrappers[index]);
            }
        }

        /**
         * Reads the pure stylesheets and collects all the Chart styles before rendering
         *
         * @return {object}
         */
        function readStylesheets() {
            let styles = document.styleSheets;
            let localStyles = {};

            for (let i = 0, styleNum = styles.length; i < styleNum; i++) {
                try {
                    let classes = styles[i].rules || styles[i].cssRules;

                    for (let j = 0, ruleNum = classes.length; j < ruleNum; j ++) {
                        if (classes[j].selectorText.indexOf('.chartComponent') !== -1) {
                            localStyles[classes[j].selectorText] = {};
                            let customDefinitions = [];

                            for (let key in classes[j].style) {
                                if (classes[j].style.hasOwnProperty(key) && !isNaN(key)) {
                                    customDefinitions.push(classes[j].style[key].replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); }));
                                }
                            }

                            for (let l = 0, definitionLength = customDefinitions.length; l < definitionLength; l++) {
                                localStyles[classes[j].selectorText][customDefinitions[l]] = classes[j].style[customDefinitions[l]];
                            }
                        }
                    }
                } catch (exception) {}
            }
            return localStyles;
        }

        /**
         * Counts the offset from the date info
         *
         * @param {string} dateInfo
         * @param {number} rangeFrom
         * @returns {number}
         */
        function getOffset(dateInfo, rangeFrom)
        {
            if (dateInfo === 'today') {
                dateInfo = currentYear+'/Q'+currentQurater;
            }

            let yearQuarter = dateInfo.split('/Q');
            let year = parseInt(yearQuarter[0]);
            let quarter = parseInt(yearQuarter[1]);
            // * 1 full year = 4 quarters, so the number of full years ((year - rangeFrom) * 4)
            // * new year = the 4th quarter finished, so it's already counted in full years, so a not full year (quarter - 1)
            // * The sum of full years and remaining quarters give the height of the bar: multiply with the height
            //   of a grid row and adds the bottom position
            return ((((year - rangeFrom) * 4) + (quarter - 1)) * rowHeight) + startOffset;
        }

        /**
         * Initialize and render chart.
         *
         * @param chartWrapper
         */
        function initChart(chartWrapper)
        {
            const chartDataset = chartWrapper.querySelector('dl.chart-dataset');
            const rangeFrom = parseInt(chartDataset.dataset.rangefrom);
            const rangeTo = (new Date()).getFullYear()+1;
            const labels = chartDataset.querySelectorAll('dt');
            const bars = chartDataset.querySelectorAll('dd');

            let grid = '';

            for (let i = rangeTo; i >= rangeFrom; i--) {
                for (let j = 4; j > 0; j--) {
                    let label = j === 1 ? '<span>'+i+'</span>' : '';
                    let style = 'gridRow';

                    if (j === 1) {
                        style += ' year';
                    }

                    if (j === currentQurater && i === currentYear) {
                        style += ' thisQuarter';
                    }

                    grid += '<div class="'+style+'">'+label+'</div>';
                }
            }

            grid += '<div class="labels">';
            for (let index in labels) {
                if (labels.hasOwnProperty(index)) {
                    let label = labels[index].innerText;
                    grid += '<div>'+label+'</div>';
                }
            }
            grid += '</div>';

            for (let index in bars) {
                if (bars.hasOwnProperty(index)) {
                    let bar = bars[index];
                    let fromData = bar.dataset.from;
                    let toData = bar.dataset.to;
                    let skill = bar.dataset.skill;
                    let counter = parseInt(index) + 1;

                    let offsetBottom = getOffset(fromData, rangeFrom);
                    let offsetTop = getOffset(toData, rangeFrom);

                    grid += '<div class="skill '+skill+' col'+counter+'" style="bottom: '+offsetBottom+'px; height: '+(offsetTop-offsetBottom)+'px"></div>';
                }
            }

            chartWrapper.innerHTML = grid;
        }
    })();
</script>
</body>
</html>
