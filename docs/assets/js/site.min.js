/*! For license information please see site.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./webpack/components/CookieStorage.js":()=>{eval("/**\n * Cookie Storage component.\n *\n * @param {object} utility\n * @param {boolean} verbose\n * @returns {*}\n */\nconst CookieStorage = function ({utility, verbose = false})\n{\n    const MAX_COOKIE_EXPIRATION_DAYS = 7;\n    /** @type {string} */\n    const consoleColorId = '#606366';\n\n    if (!utility instanceof Utility) {\n        throw new ReferenceError('This component requires the Utility component to be loaded.');\n    }\n\n    /**\n     * Initialize component\n     */\n    const initialize = function()\n    {\n        utility.triggerEvent({element: document, eventName: 'Component.Cookie.Ready'});\n    };\n\n    /**\n     * Set a cookie.\n     *\n     * @param {string} cookieName  The name of the cookie\n     * @param {string} cookieValue The value of the cookie\n     * @param {number} expirationDays Expiration days\n     * @param {boolean} standardLog Whether to log the standard info or not\n     */\n    const setCookie = function (cookieName, cookieValue, expirationDays, standardLog = true)\n    {\n        const date = new Date();\n        date.setTime(date.getTime() + (expirationDays * 24 * 60 * 60 * 1000));\n        const expires = \"expires=\"+ date.toUTCString();\n\n        standardLog && verbose && console.info(\n            '%c[Cookie Storage]%c ⚡%c Setting Cookie : %o',\n            'color:white;background:'+consoleColorId+';font-weight:bold;',\n            'color:orange;font-weight:bold',\n            'color:#599bd6',\n            cookieName\n        );\n        document.cookie = cookieName + '=' + cookieValue + ';' + expires + ';path=/;SameSite=Lax' + (location.protocol === 'https:' ? ';secure' : '');\n    };\n\n    /**\n     * Retrieve a cookie value.\n     *\n     * @param {string} cookieName The name of the cookie\n     * @returns {string}\n     */\n    const getCookie = function (cookieName)\n    {\n        const name = cookieName + \"=\";\n        const decodedCookie = decodeURIComponent(document.cookie);\n        const cookieArray = decodedCookie.split(';');\n        let cookie, i, num;\n\n        for (i = 0, num = cookieArray.length; i < num; i++) {\n            cookie = cookieArray[i];\n            while (cookie.charAt(0) === ' ') {\n                cookie = cookie.substring(1);\n            }\n            if (cookie.indexOf(name) === 0) {\n                return cookie.substring(name.length, cookie.length);\n            }\n        }\n\n        return '';\n    };\n\n    /**\n     * Renew a cookie if exists.\n     *\n     * @param {string} cookieName The name of the cookie\n     * @param {number} expirationDays Expiration days of the cookie\n     */\n    const renewCookie = function(cookieName, expirationDays)\n    {\n        const cookieValue = getCookie(cookieName);\n\n        if (cookieValue !== '') {\n            verbose && console.info(\n                '%c[Cookie Storage]%c ⚡%c Renew Cookie : %o',\n                'color:white;background:'+consoleColorId+';font-weight:bold;',\n                'color:orange;font-weight:bold',\n                'color:#599bd6',\n                cookieName\n            );\n\n            setCookie(cookieName, cookieValue, expirationDays, false);\n        }\n    };\n\n    /**\n     * Delete a cookie if exists.\n     *\n     * @param {string} cookieName The name of the cookie\n     */\n    const deleteCookie = function(cookieName)\n    {\n        if (getCookie(cookieName) !== '') {\n            verbose && console.info(\n                '%c[Cookie Storage]%c ⚡%c Delete Cookie : %o',\n                'color:white;background:'+consoleColorId+';font-weight:bold;',\n                'color:orange;font-weight:bold',\n                'color:#599bd6',\n                cookieName\n            );\n\n            setCookie(cookieName, '', -1);\n        }\n    };\n\n    verbose && console.info(\n        '%c[Cookie Storage]%c ✔%c The Cookie Component loaded.',\n        'color:white;background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n        /**\n         * Set a cookie.\n         *\n         * @param {string} key  The name of the cookie\n         * @param {string} value The value of the cookie\n         * @param {boolean} session The data should be deleted when the browser session ends.\n         */\n        set: function ({key, value, session = false}) {\n            const expirationDays = session ? 0 : MAX_COOKIE_EXPIRATION_DAYS;\n\n            setCookie(key, value, expirationDays);\n        },\n\n        /**\n         * Retrieve a cookie value.\n         *\n         * @param {string} key The name of the cookie\n         * @returns {string}\n         */\n        get: function ({key}) {\n            return getCookie(key);\n        },\n\n        /**\n         * Renew a cookie if exists.\n         *\n         * @param {string} key The name of the cookie\n         * @param {boolean} session The data should be deleted when the browser session ends.\n         */\n        renew: function({key, session = false}) {\n            const expirationDays = session ? 0 : MAX_COOKIE_EXPIRATION_DAYS;\n\n            renewCookie(key, expirationDays);\n        },\n\n        /**\n         * Delete a cookie if exists.\n         *\n         * @param {string} key The name of the cookie\n         */\n        delete: function(key) {\n            deleteCookie(key);\n        },\n    }\n};\n\nwindow['CookieStorage'] = CookieStorage;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/CookieStorage.js?")},"./webpack/components/DataStorage.js":()=>{eval("/**\n * Data Storage component.\n *\n * @param {object} utility\n * @param {boolean} verbose\n * @returns {*}\n */\nconst DataStorage = function ({utility, verbose = false})\n{\n    /** @type {string} */\n    const consoleColorId = '#13D225';\n    /** @type {object} */\n    const storage = {};\n\n    if (!utility instanceof Utility) {\n        throw new ReferenceError('This component requires the Utility component to be loaded.');\n    }\n\n    if (typeof(Storage) === 'undefined') {\n        throw new ReferenceError('Your browser does not support the local/session storage feature.');\n    }\n\n    /**\n     * Initialize component\n     */\n    const initialize = function()\n    {\n        initStorageKeys(localStorage);\n        initStorageKeys(sessionStorage);\n\n        utility.triggerEvent({element: document, eventName: 'Component.DataStorage.Ready'});\n    };\n\n    /**\n     * Fills up the registry.\n     *\n     * @param storageEngine\n     */\n    const initStorageKeys = function(storageEngine)\n    {\n        const storageKeys = Object.keys(storageEngine);\n        let i = storageKeys.length;\n\n        while (i--) {\n            storage[storageKeys[i]] = storageEngine;\n        }\n    };\n\n    /**\n     * Set data.\n     *\n     * @param {string} key   The name of the key\n     * @param {string} value The value\n     */\n    const setData = function (key, value)\n    {\n        verbose && console.info(\n            '%c[Data Storage]%c ⚡%c Setting data into dataStorage: %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:orange;font-weight:bold',\n            'color:#599bd6',\n            key\n        );\n        typeof storage[key] !== 'undefined' && storage[key].setItem(key, value);\n    };\n\n    /**\n     * Retrieve data by key.\n     *\n     * @param {string} key The name of the key\n     * @returns {string}\n     */\n    const getDataByKey = function (key)\n    {\n        return typeof storage[key] !== 'undefined'\n            ? storage[key].getItem(key)\n            : '';\n    };\n\n    /**\n     * Delete data by key.\n     *\n     * @param {string} key The name of the key\n     */\n    const deleteDataByKey = function(key)\n    {\n        typeof storage[key] !== 'undefined' && storage[key].removeItem(key);\n    };\n\n    verbose && console.info(\n        '%c[Data Storage]%c ✔%c The Data Storage Component loaded.',\n        'background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n        /**\n         * Set data.\n         *\n         * @param {string} key   The name of the key\n         * @param {string} value The value\n         * @param {boolean} session The data should be deleted when the browser session ends.\n         */\n        set: function ({key, value, session = false}) {\n            // To avoid to leave mess in local storage when setting an existing key to session storage, first we delete.\n            deleteDataByKey(key);\n\n            storage[key] = session ? sessionStorage : localStorage;\n\n            setData(key, value);\n        },\n\n        /**\n         * Retrieve data by key.\n         *\n         * @param {string} key The name of the key\n         * @returns {string}\n         */\n        get: function ({key}) {\n            return getDataByKey(key);\n        },\n\n        /**\n         * Renew a data if exists.\n         * No real use. Its only purpose is to be compatible with the CookieStorage.\n         *\n         * @param {string} key The name of the key\n         * @param {boolean} session The data should be deleted when the browser session ends.\n         */\n        renew: function({key, session = false}) {\n            const value = getDataByKey(key);\n\n            if (value !== '') {\n                this.set({key: key, value: value, session: session});\n            }\n        },\n\n        /**\n         * Delete data by key.\n         *\n         * @param {string} key The name of the key\n         */\n        delete: function({key}) {\n            deleteDataByKey(key);\n        },\n    }\n};\n\nwindow['DataStorage'] = DataStorage;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/DataStorage.js?")},"./webpack/components/FeatureToggleSwitch.js":()=>{eval("/**\n * Feature Toggle component.\n *\n * @param {object} utility\n * @param {object} storage\n * @param {object} featureToggleTargets\n * @param {boolean} verbose\n * @returns {*}\n */\nconst FeatureToggleSwitch = function ({utility, storage, options = {}, verbose = false})\n{\n    /** @type {NodeList} */\n    let featureToggleSwitches;\n    /** @type {number} */\n    let idCounter = 1;\n    /** @type {string} */\n    const consoleColorId = '#FF9B49';\n\n    if (!utility instanceof Utility) {\n        throw new ReferenceError('This component requires the Utility component to be loaded.');\n    }\n\n    if (!storage instanceof CookieStorage || !storage instanceof DataStorage) {\n        throw new ReferenceError('This component requires either the CookieStorage or the LocalStorage component to be loaded.');\n    }\n\n    /**\n     * A Feature Toggle Switch element\n     *\n     * @param {HTMLDivElement|Node} HTMLElement\n     * @param {String} featureName\n     * @param {{state: boolean, label: string, storageKey: string}} toggleOptions\n     * @returns {*}\n     */\n    const FeatureToggleSwitchElement = function (HTMLElement, featureName, toggleOptions)\n    {\n        // Wipe out any dirt\n        HTMLElement.innerHTML = '';\n\n        let state = storage.get({key: toggleOptions.storageKey}) === 'On'\n            ? true\n            : toggleOptions.state;\n\n        const checkbox = document.createElement('input');\n        checkbox.setAttribute('type', 'checkbox');\n        checkbox.setAttribute('id', HTMLElement.id + '-' + featureName);\n        checkbox.addEventListener('change', function () {\n            toggleSwitch(featureName)\n        });\n\n        const label = document.createElement('label');\n        label.setAttribute('for', HTMLElement.id + '-' + featureName);\n        const labelText = document.createElement('span');\n        labelText.innerHTML =  toggleOptions.label;\n        const labelSwitch = document.createElement('span');\n        label.appendChild(labelText);\n        label.appendChild(labelSwitch);\n\n        HTMLElement.appendChild(checkbox);\n        HTMLElement.appendChild(label);\n\n        /**\n         *\n         * @param {Boolean} setActive\n         */\n        const switchState = function(setActive) {\n            state = setActive;\n            document.getElementById(HTMLElement.id + '-' + featureName).checked = state;\n            storage.set({key: toggleOptions.storageKey, value: (state ? 'On' : 'Off')});\n        };\n\n        switchState(state);\n\n        verbose && console.info(\n            '%c[Feature Toggle Switch]%c ✚%c a switch element initialized %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:green; font-weight:bold;',\n            'color:black;',\n            '#'+HTMLElement.getAttribute('id')\n        );\n\n        return {\n            /**\n             * Returns the feature name.\n             *\n             * @returns {String}\n             */\n            getFeatureName : function() {\n                return featureName;\n            },\n\n            /**\n             * Returns the current state.\n             *\n             * @returns {String}\n             */\n            getState : function () {\n                return state ? 'on' : 'off';\n            },\n\n            /**\n             * Toggles the switch on.\n             */\n            on : function() {\n                switchState(true);\n            },\n\n            /**\n             * Toggles the switch off.\n             */\n             off : function () {\n                switchState(false);\n            }\n        }\n    };\n\n    /**\n     * Initialize the component handler.\n     */\n    const initialize = function(reScan = false)\n    {\n        !reScan && verbose && console.info(\n            '%c[Feature Toggle Switch]%c ...looking for Feature Toggle Switch elements.',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:#cecece'\n        );\n\n        featureToggleSwitches = document.querySelectorAll('div[data-feature]');\n\n        featureToggleSwitches.forEach(function (element) {\n            if (typeof element.component === 'undefined') {\n                /** @type {HTMLDivElement|Node} element */\n                if (!element.hasAttribute('id')) {\n                    element.setAttribute('id', 'featureToggle' + (idCounter++));\n                }\n\n                const featureName = element.dataset.feature;\n                const toggleOptions = (typeof options[featureName] !== 'undefined')\n                    ? options[featureName]\n                    : {state: false, label: 'Toggle feature \"'+featureName+'\" On or Off', storageKey: 'feature_'+featureName};\n\n                element.component = new FeatureToggleSwitchElement(element, featureName, toggleOptions);\n            }\n        });\n\n        !reScan && utility.triggerEvent({element: document, eventName: 'Component.FeatureToggleSwitch.Ready'});\n    };\n\n    /**\n     * Get all FeatureToggle elements by name.\n     *\n     * @param {String} featureToggleName The non-unique name of the FeatureToggle element.\n     * @returns {[]}\n     */\n    const getElementsByName = function(featureToggleName)\n    {\n        const components = [];\n\n        featureToggleSwitches.forEach(function (element) {\n            if (typeof element.component !== 'undefined') {\n                if (element.component.getFeatureName() === featureToggleName) {\n                    components.push(element.component);\n                }\n            }\n        });\n\n        return components;\n    };\n\n    /**\n     * Toggle FeatureToggle element(s) by the given name.\n     *\n     * @param {String} featureToggleName The non-unique name of the FeatureToggle element.\n     * @return {Array}\n     */\n    const toggleSwitch = function(featureToggleName)\n    {\n        featureToggleSwitches.forEach(function (element) {\n            if (typeof element.component !== 'undefined') {\n                if (element.component.getFeatureName() === featureToggleName) {\n                    if (element.component.getState() === 'on') {\n                        element.component.off();\n                    } else {\n                        element.component.on();\n                    }\n                }\n            }\n        });\n    };\n\n    /**\n     * Toggle on/off all FeatureToggle elements.\n     *\n     * @param {String} newState The new status: 'on' or 'off'.\n     */\n    const toggleAll = function (newState = 'on')\n    {\n        if (['on', 'off'].indexOf(newState) === -1) {\n            newState = 'on';\n        }\n\n        featureToggleSwitches.forEach(function (element) {\n            if (typeof element.component !== 'undefined') {\n                if (newState === 'on') {\n                    element.component.on();\n                } else {\n                    element.component.off();\n                }\n            }\n        });\n    };\n\n    verbose && console.info(\n        '%c[Feature Toggle Switch]%c ✔%c The Feature Toggle Switch component loaded.',\n        'background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n        reScan: function() {\n            initialize();\n        },\n        /**\n         * Get all FeatureToggle elements by name.\n         *\n         * @param {String} featureToggleName The non-unique name of the FeatureToggle element.\n         * @returns {[]}\n         */\n        getElementsByName : function({featureToggleName}) {\n            return getElementsByName(featureToggleName);\n        },\n\n        /**\n         * Toggle FeatureToggle element(s) by the given name.\n         *\n         * @param {String} featureToggleName The non-unique name of the FeatureToggle element.\n         * @return {Array}\n         */\n        toggleSwitch : function({featureToggleName}) {\n            toggleSwitch(featureToggleName);\n        },\n\n        /**\n         * Toggle on/off all FeatureToggle elements.\n         *\n         * @param {String} newState The new status: 'on' or 'off'.\n         */\n        toggleAll : function ({newState = 'on'}) {\n            toggleAll(newState);\n        }\n    };\n};\n\nwindow['FeatureToggleSwitch'] = FeatureToggleSwitch;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/FeatureToggleSwitch.js?")},"./webpack/components/GdprDialog.js":()=>{eval("/**\n * GDPR Dialog component.\n * @param {object} utility\n * @param {object} storage\n * @param {string} storageKey\n * @param {object} featureToggle\n * @param {boolean} verbose\n * @returns {*}\n */\nconst GdprDialog = function ({utility, storage, storageKey,featureToggle,  verbose = false})\n{\n    /** @type {string} */\n    const consoleColorId = '#FFA3EA';\n\n    if (!utility instanceof Utility) {\n        throw new ReferenceError('This component requires the Utility component to be loaded.');\n    }\n\n    if (!storage instanceof CookieStorage || !storage instanceof DataStorage) {\n        throw new ReferenceError('This component requires either the CookieStorage or the DataStorage component to be loaded.');\n    }\n\n    if (!featureToggle instanceof FeatureToggleSwitch) {\n        throw new ReferenceError('This component requires the FeatureToggleSwitch component to be loaded.');\n    }\n\n    /**\n     * A GDPR Dialog element.\n     *\n     * @param {HTMLDivElement} HTMLElement\n     * @returns {*}\n     */\n    const GdprDialogElement = function ({HTMLElement})\n    {\n        const acceptAllButton = HTMLElement.querySelector('.g-buttons__acceptAll');\n        const closeButton = HTMLElement.querySelector('.g-buttons__close');\n        const settingsTabSwitchButton = HTMLElement.querySelector('.g-buttons__showSettings');\n        const introTabSwitchButton = HTMLElement.querySelector('.g-buttons__showIntro');\n\n        const contentIntro = HTMLElement.querySelector('.g-tab.-intro');\n        const contentSettings = HTMLElement.querySelector('.g-tab.-settings');\n\n        const privacyLinks = HTMLElement.querySelectorAll('a.privacy');\n\n        const openDialog = function() {\n            HTMLElement.style.display = 'block';\n            verbose && console.info(\n                '%c[GDPR Dialog]%c ⚡%c Dialog window opened : %o',\n                'background:'+consoleColorId+';font-weight:bold;',\n                'color:orange;font-weight:bold',\n                'color:#599bd6',\n                HTMLElement.id\n            );\n        };\n\n        /**\n         * Closes the modal window\n         */\n        const closeDialog = function () {\n            HTMLElement.style.display = 'none';\n            verbose && console.info(\n                '%c[GDPR Dialog]%c ⚡%c Dialog window closed : %o',\n                'background:'+consoleColorId+';font-weight:bold;',\n                'color:orange;font-weight:bold',\n                'color:#599bd6',\n                HTMLElement.id\n            );\n        };\n\n        const setPrivacyCookie = function() {\n            storage.set({key: storageKey, value: 'On'});\n        };\n\n        acceptAllButton.addEventListener('click', function () {\n            featureToggle.toggleAll({newState:'on'});\n            setPrivacyCookie();\n            closeDialog();\n        });\n\n        settingsTabSwitchButton.addEventListener('click', function () {\n            contentIntro.classList.remove('-active');\n            contentSettings.classList.add('-active');\n        });\n\n        introTabSwitchButton.addEventListener('click', function () {\n            contentIntro.classList.add('-active');\n            contentSettings.classList.remove('-active');\n        });\n\n        closeButton.addEventListener('click', function () {\n            setPrivacyCookie();\n            closeDialog();\n        });\n\n        privacyLinks.forEach(function (privacyLink) {\n            privacyLink.addEventListener('click', function () {\n                setPrivacyCookie();\n                closeDialog();\n            });\n        });\n\n        verbose && console.info(\n            '%c[GDPR Dialog]%c ✚%c the GDPR Dialog element initialized %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:green; font-weight:bold;',\n            'color:black;',\n            '#'+HTMLElement.getAttribute('id')\n        );\n\n        if (storage.get({key: storageKey}) !== 'On') {\n            openDialog();\n        }\n\n        return {\n            /**\n             * Opens the modal window.\n             */\n            open: function() {\n                openDialog();\n            },\n\n            /**\n             * Closes the modal window\n             */\n            close: function () {\n                closeDialog();\n            }\n        }\n    };\n\n    /**\n     * Initializes the component and collects the elements.\n     */\n    const initialize = function ()\n    {\n\n        if (storage.get({key: storageKey}) !== 'On') {\n            utility.fetch({\n                url: '/gdpr/index.html',\n                method: 'GET',\n                enctype: 'text/html',\n                successCallback: function (response) {\n                    response.text().then(function (data) {\n                        verbose && console.info(\n                            '%c[GDPR Dialog]%c ...looking for the GDPR Dialog element.',\n                            'background:'+consoleColorId+';font-weight:bold;',\n                            'color:#cecece'\n                        );\n\n                        const div = document.createElement('div');\n                        div.innerHTML = data;\n                        document.body.appendChild(div);\n\n                        /** @type {HTMLDivElement|Node} element */\n                        const dialogElement = document.querySelector('.dialog.g-gdpr');\n\n                        if (!dialogElement.hasAttribute('id')) {\n                            dialogElement.setAttribute('id', 'GdprDialog1');\n                        }\n\n                        dialogElement.component = new GdprDialogElement({HTMLElement: dialogElement});\n\n                        featureToggle.reScan();\n\n                        utility.triggerEvent({element: document, eventName: 'Component.GdprDialog.Ready'});\n                    });\n                }\n            });\n        } else {\n            verbose && console.info(\n                '%c[GDPR Dialog]%c ✖%c The GDPR Consent already established.',\n                'background:'+consoleColorId+';font-weight:bold;',\n                'color:red; font-weight:bold;',\n                'color:black; font-weight:normal;'\n            );\n        }\n    };\n\n    verbose && console.info(\n        '%c[GDPR Dialog]%c ✔%c The GDPR Dialog component loaded.',\n        'background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n\n    };\n};\n\nwindow['GdprDialog'] = GdprDialog;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/GdprDialog.js?")},"./webpack/components/LazyLoadImage.js":()=>{eval("/**\n * Lazy Load Image component.\n *\n * @param {object} utility\n * @param {boolean} verbose\n * @returns {*}\n */\nconst LazyLoadImage = function ({utility, verbose = false})\n{\n    /** @type {NodeList} */\n    let lazyLoadImages;\n    /** @type {number} */\n    let idCounter = 1;\n    /** @type {string} */\n    const consoleColorId = '#BFFFF5';\n    /** @type {IntersectionObserver|IntersectionObserverFallback} */\n    let imageObserver;\n\n    if (!utility instanceof Utility) {\n        throw new ReferenceError('This component requires the Utility component to be loaded.');\n    }\n\n    const IntersectionObserverFallback = function() {\n        verbose && console.info(\n            '%c[Lazy Load Image]%c ✖%c the IntersectionObserver function is not supported. Loading images in normal mode.',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:red',\n            'color:#599bd6'\n        );\n\n        return {\n            observe: function (element) {\n                element.src = element.dataset.src;\n\n                verbose && console.info(\n                    '%c[Lazy Load Image]%c ⚡%c an image element loaded %o',\n                    'background:'+consoleColorId+';font-weight:bold;',\n                    'color:orange;font-weight:bold',\n                    'color:#599bd6',\n                    '#'+element.getAttribute('id')\n                );\n            }\n        }\n    };\n\n    const intersectionObserverClass = typeof IntersectionObserver !== 'undefined'\n        ? IntersectionObserver\n        : IntersectionObserverFallback;\n\n    /**\n     * Adds lazy-load behaviour to an image element.\n     *\n     * @param {HTMLImageElement|Node} HTMLElement\n     * @returns {*}\n     */\n    const LazyLoadImageElement = function ({HTMLElement}) {\n        verbose && console.info(\n            '%c[Lazy Load Image]%c ✚%c an image element initialized %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:green; font-weight:bold;',\n            'color:black;',\n            '#'+HTMLElement.getAttribute('id')\n        );\n\n        return {\n            /**\n             * Loads the actual image when it gets into view\n             */\n            loadImage: function () {\n                if (!HTMLElement.hasAttribute('data-src')) {\n                    return;\n                }\n                const imageSource = HTMLElement.dataset.src;\n                const preload  = new Image();\n\n                preload.addEventListener('error', function (event) {\n                    event.preventDefault();\n                    verbose && console.info(\n                        '%c[Lazy Load Image]%c ✖%c an image resource is not found %c'+imageSource,\n                        'background:'+consoleColorId+';font-weight:bold;',\n                        'color:red',\n                        'color:#599bd6',\n                        'color:black;font-style:italic'\n                    );\n                });\n\n                preload.addEventListener('load', function () {\n                    HTMLElement.src = imageSource;\n                    HTMLElement.removeAttribute('data-src');\n\n                    verbose && console.info(\n                        '%c[Lazy Load Image]%c ⚡%c an image element loaded %o',\n                        'background:'+consoleColorId+';font-weight:bold;',\n                        'color:orange;font-weight:bold',\n                        'color:#599bd6',\n                        '#'+HTMLElement.getAttribute('id')\n                    );\n                });\n\n                preload.src = imageSource;\n            }\n        }\n    };\n\n    /**\n     * Initializes the loader and collects the elements.\n     */\n    const initialize = function()\n    {\n        verbose && console.info(\n            '%c[Lazy Load Image]%c ...looking for image elements.',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:#cecece'\n        );\n\n        lazyLoadImages = document.querySelectorAll('img[data-src]');\n\n        imageObserver = new intersectionObserverClass((entries, imgObserver) => {\n            entries.forEach((entry) => {\n                if (entry.isIntersecting) {\n                    /** @type LazyLoadImageElement lazyLoadImageElement */\n                    let lazyLoadImageElement = entry.target.component;\n                    lazyLoadImageElement.loadImage();\n                }\n            })\n        });\n\n        lazyLoadImages.forEach(function (element) {\n            if (!element.hasAttribute('id')) {\n                element.setAttribute('id', 'lazyImage' + (idCounter++));\n            }\n\n            element.component = new LazyLoadImageElement({HTMLElement: element});\n            imageObserver.observe(element);\n        });\n\n        utility.triggerEvent({element: document, eventName: 'Component.LazyLoadImage.Ready'});\n    };\n\n    verbose && console.info(\n        '%c[Lazy Load Image]%c ✔%c The Lazy Load Image component loaded.',\n        'background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n        /**\n         * Returns the collection of lazy-loaded images.\n         *\n         * @returns {NodeList}\n         */\n        getLazyLoadImages: function () {\n            return lazyLoadImages;\n        }\n    };\n};\n\nwindow['LazyLoadImage'] = LazyLoadImage;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/LazyLoadImage.js?")},"./webpack/components/Utility.js":()=>{eval("/**\n * Utility component.\n *\n * @param {boolean} verbose\n * @returns {*}\n */\nconst Utility = function ({verbose = false})\n{\n    /** @type {string} */\n    const consoleColorId = '#D7CFFF';\n\n    /**\n     * Converts a form data to object\n     *\n     * @param {FormData} formData\n     * @return {Object}\n     */\n    const formDataToObject = function ({formData})\n    {\n        const object = {};\n\n        formData.forEach(function (value, key) {\n            object[key] = value;\n        });\n\n        return object;\n    };\n\n    /**\n     * Converts an object to form data\n     *\n     * @param {Object} object\n     * @return {FormData}\n     */\n    const objectToFormData = function ({object})\n    {\n        const formData = new FormData();\n\n        for (let attribute in object) {\n            if (object.hasOwnProperty(attribute)) {\n                formData.append(attribute, object[attribute]);\n            }\n        }\n\n        return formData\n    };\n\n    /**\n     * Initialize component\n     */\n    const initialize = function()\n    {\n        triggerEvent(document, 'Component.Utility.Ready');\n    };\n\n    /**\n     * Makes an XmlHttpRequest.\n     *\n     * @param {string} url\n     * @param {string} method\n     * @param {boolean} async\n     * @param {string} enctype\n     * @param {FormData|object} data\n     * @param {null|function} successCallback\n     * @param {null|function} failureCallback\n     * @returns {XMLHttpRequest}\n     */\n    const doXmlHttpRequest = function(url, method, async, enctype, data, successCallback, failureCallback)\n    {\n        const rnd = new Date().getTime();\n        url = url + (url.lastIndexOf('?') === -1 ? '?' : '&') + 'timestamp=' + rnd;\n\n        const xhr = new XMLHttpRequest();\n        xhr.open(method, url, async);\n\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n                try {\n                    if (xhr.status === 200) {\n                        successCallback(xhr.responseText);\n                    } else {\n                        failureCallback(xhr.responseText);\n                    }\n                } catch (exp) {\n                    verbose && console.warn('JSON parse error. Continue', exp);\n                }\n            }\n        };\n\n        // if NOT multipart/form-data, turn the FromData into object\n        if (data instanceof FormData && enctype !== 'multipart/form-data') {\n            data = formDataToObject(data);\n        }\n\n        // if mulitpart/form-data, turn the data into FormData\n        if (!data instanceof FormData && enctype === 'multipart/form-data') {\n            data = objectToFormData(data);\n        }\n\n        switch (enctype) {\n            case 'application/json':\n                data = JSON.stringify(data);\n                xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n                break;\n\n            case 'application/x-www-form-urlencoded':\n                data = Object.keys(data).map(function (key) {\n                    return key + '=' + data[key]\n                }).join('&');\n                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n                break;\n\n            case 'multipart/form-data':\n                xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n                break;\n        }\n\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr.send(data);\n\n        return xhr;\n    };\n\n    /**\n     * Fetches a URL\n     *\n     * @param {string} url\n     * @param {string} method\n     * @param {boolean} async\n     * @param {string} enctype\n     * @param {FormData|object} data\n     * @param {null|function} successCallback\n     * @param {null|function} failureCallback\n     */\n    const doFetch = function(url, method, async, enctype, data, successCallback, failureCallback)\n    {\n        switch (enctype) {\n            case 'application/json':\n                if (data instanceof FormData) {\n                    data = formDataToObject(data);\n                }\n\n                data = JSON.stringify(data);\n                break;\n\n            case 'application/x-www-form-urlencoded':\n                if (data instanceof FormData) {\n                    data = formDataToObject(data);\n                }\n\n                data = Object.keys(data).map(function (key) {\n                    return key + '=' + data[key]\n                }).join('&');\n                break;\n\n            case 'multipart/form-data':\n                if (!data instanceof FormData) {\n                    data = objectToFormData(data);\n                }\n                break;\n        }\n\n        const request = {\n            method: method,\n            headers: {\n                'Content-Type': enctype,\n                'X-Requested-With': 'XMLHttpRequest'\n            }\n        };\n\n        if (method !== 'GET' && method !== 'HEAD') {\n            request.body = data;\n        }\n\n        verbose && console.info(\n            '%c[Utility]%c ⚡%c Fetching URL %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:orange;font-weight:bold',\n            'color:#599bd6',\n            url\n        );\n\n        fetch(url, request)\n            .then(function (response) {\n                if (response.ok) {\n                    successCallback(response);\n                } else {\n                    const error = new Error(response.statusText || response.status);\n                    error.response = response;\n                    throw error\n                }\n            })\n            .catch(function (err) {\n                failureCallback(err);\n            });\n    };\n\n    /**\n     * Triggers an event on an element.\n     *\n     * @param {*}       element\n     * @param {string}  eventName\n     * @param {*}       [customData]\n     */\n    const triggerEvent = function (element, eventName, customData)\n    {\n        let event;\n\n        if (customData !== null) {\n            event = new CustomEvent(eventName, {'detail': customData})\n        } else {\n            event = new Event(eventName);\n        }\n\n        verbose && console.info(\n            '%c[Utility]%c ⚡%c Triggering event: %o',\n            'background:'+consoleColorId+';font-weight:bold;',\n            'color:orange;font-weight:bold',\n            'color:#599bd6',\n            eventName\n        );\n\n        element.dispatchEvent(event);\n    };\n\n    /**\n     * Returns the event element path.\n     *\n     * @param {Event} event\n     * @return {Array}\n     */\n    const getEventPath = function (event)\n    {\n        let path = (event.composedPath && event.composedPath()) || event.path,\n            target = event.target;\n\n        if (typeof path !== 'undefined') {\n            // Safari doesn't include Window, and it should.\n            path = (path.indexOf(window) < 0) ? path.concat([window]) : path;\n            return path;\n        }\n\n        if (target === window) {\n            return [window];\n        }\n\n        function getParents(node, memo)\n        {\n            memo = memo || [];\n            const parentNode = node.parentNode;\n\n            if (!parentNode) {\n                return memo;\n            } else {\n                return getParents(parentNode, memo.concat([parentNode]));\n            }\n        }\n\n        return [target]\n            .concat(getParents(target))\n            .concat([window]);\n    };\n\n    /**\n     * Tries to figure out the operating system\n     *\n     * @returns {string}\n     */\n    const getDeviceOs = function()\n    {\n        let operatingSystem = 'Unknown';\n        const patterns = ['Win', 'Mac', 'X11', 'Linux', 'iPhone', 'iPad', 'Android'];\n        const supportedOperatingSystems = ['Windows', 'MacOS', 'Unix', 'Linux', 'iOS', 'iOS', 'Android'];\n\n        for (let i in patterns) {\n            if (navigator.platform.indexOf(patterns[i]) !== -1) {\n                operatingSystem = supportedOperatingSystems[i];\n            }\n        }\n\n        return operatingSystem;\n    };\n\n    verbose && console.info(\n        '%c[Utility]%c ✔%c The Utility Component loaded.',\n        'background:'+consoleColorId+';font-weight:bold;',\n        'color:green; font-weight:bold;',\n        'color:black; font-weight:bold;'\n    );\n\n    initialize();\n\n    return {\n        /**\n         * Makes an XmlHttpRequest.\n         *\n         * @param {string} url\n         * @param {string} method\n         * @param {boolean} async\n         * @param {string} enctype\n         * @param {FormData|object} data\n         * @param {null|function} successCallback\n         * @param {null|function} failureCallback\n         * @returns {XMLHttpRequest}\n         */\n        ajax : function ({url = '/', method = 'POST', async = true, enctype = 'application/json', data = {}, successCallback = null, failureCallback = null}) {\n            if (typeof successCallback !== 'function') {\n                successCallback = function (data) {};\n            }\n\n            if (typeof failureCallback !== 'function') {\n                failureCallback =  function (data) {};\n            }\n\n            return doXmlHttpRequest(url, method, async, enctype, data, successCallback, failureCallback);\n        },\n\n        /**\n         * Fetches a URL\n         *\n         * @param {string} url\n         * @param {string} method\n         * @param {boolean} async\n         * @param {string} enctype\n         * @param {FormData|object} data\n         * @param {null|function} successCallback\n         * @param {null|function} failureCallback\n         */\n        fetch: function ({url = '/', method = 'POST', async = true, enctype = 'application/json', data = {}, successCallback = null, failureCallback = null}) {\n            if (typeof successCallback !== 'function') {\n                successCallback = function (data) {};\n            }\n\n            if (typeof failureCallback !== 'function') {\n                failureCallback =  function (data) {};\n            }\n\n            return doFetch(url, method, async, enctype, data, successCallback, failureCallback);\n        },\n\n        /**\n         * Triggers an event on an element.\n         *\n         * @param {*}   element\n         * @param {string} eventName\n         * @param {*}      [customData]\n         */\n        triggerEvent : function ({element, eventName, customData = null}) {\n            triggerEvent(element, eventName, customData);\n        },\n\n        /**\n         * Returns the event element path.\n         *\n         * @param {Event} event\n         * @return {Array}\n         */\n        getEventPath: function ({event}) {\n            return getEventPath(event);\n        },\n\n        /**\n         * Tries to figure out the operating system\n         *\n         * @returns {string}\n         */\n        getDeviceOs: function () {\n            return getDeviceOs();\n        }\n    };\n};\n\nwindow['Utility'] = Utility;\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/components/Utility.js?")},"./webpack/entry.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval("const PRIVACY_ACCEPT_STORAGE_NAME = 'privacy_Accept_20200109';\n\n__webpack_require__(/*! ./components/Utility */ \"./webpack/components/Utility.js\");\n__webpack_require__(/*! ./components/DataStorage */ \"./webpack/components/DataStorage.js\");\n__webpack_require__(/*! ./components/CookieStorage */ \"./webpack/components/CookieStorage.js\");\n__webpack_require__(/*! ./components/FeatureToggleSwitch */ \"./webpack/components/FeatureToggleSwitch.js\");\n__webpack_require__(/*! ./components/LazyLoadImage */ \"./webpack/components/LazyLoadImage.js\");\n__webpack_require__(/*! ./components/GdprDialog */ \"./webpack/components/GdprDialog.js\");\n\nlet utility = null;\n\ndocument.addEventListener('DOMContentLoaded', function(event) {\n    utility = new Utility({verbose: true});\n})\n\n/**\n * Embed a \"Worst practice\" code sample.\n */\nconst embedWorstPracticeSample = function () {\n    const badCodesCounter = 5;\n    const badCodes = [];\n\n    for (let i = 1; i <= badCodesCounter; i++) {\n        let fileCounter = '' + i;\n        badCodes.push(fileCounter.padStart(4, '0') + '.html');\n    }\n\n    const date = new Date();\n    let day = date.getDate();\n    if (day < 10) {\n        day = '0' + day;\n    }\n    let month = (date.getMonth() + 1);\n    if (month < 10) {\n        month = '0' + month;\n    }\n    const year = date.getFullYear();\n    const today = parseInt(year + '' + month + '' + day);\n    const codeOfTheDay = today % badCodes.length;\n\n    utility.fetch({\n        url: '/code-of-the-day/' + badCodes[codeOfTheDay],\n        method: 'GET',\n        enctype: 'text/html',\n        successCallback: function (response) {\n            if (response.status !== 200) {\n                console.log('Looks like there was a problem. Status Code: ' + response.status);\n                return;\n            }\n\n            // Examine the text in the response\n            response.text().then(function (data) {\n                document.querySelector('.codeOfTheDay__content').innerHTML = data;\n                document.querySelector('input.codeOfTheDay__toggle').addEventListener('click', function (event) {\n                    /** @type HTMLInputElement */\n                    const element = event.target;\n                    if (element.checked) {\n                        scrollTo({ top: 0, behavior: 'smooth' });\n                        // scrollTo(0, 0);\n                        document.body.style.overflow = 'hidden';\n                        document.querySelector('.codeOfTheDay').style.zIndex = '101';\n                    } else {\n                        document.body.style.overflowY = 'auto';\n                        document.body.style.overflowX = 'hidden';\n                        document.querySelector('.codeOfTheDay').style.zIndex = '99';\n                    }\n                });\n            });\n        }\n    });\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    let dataStorage;\n\n    try {\n        dataStorage = new DataStorage({utility: utility, verbose: true});\n    } catch (e) {\n        dataStorage = new CookieStorage({utility: utility, verbose: true});\n        dataStorage.renew({key: PRIVACY_ACCEPT_STORAGE_NAME});\n    }\n\n    const featureToggleOptions = {};\n\n    new LazyLoadImage({utility: utility, verbose: true});\n    const featureToggle = new FeatureToggleSwitch({utility: utility, storage: dataStorage, options: featureToggleOptions,  verbose: true});\n    new GdprDialog({utility: utility, storage: dataStorage, storageKey: PRIVACY_ACCEPT_STORAGE_NAME, featureToggle: featureToggle, verbose: true});\n\n    embedWorstPracticeSample();\n\n    document.querySelectorAll('a.google').forEach(function (element) {\n        element.addEventListener('click', function (event) {\n            if (!confirm('This link will take you to a Google Service website.\\nDo you really want it?')) {\n                event.preventDefault();\n                return false;\n            }\n        })\n    })\n});\n\n\n//# sourceURL=webpack://worstpractice-blog/./webpack/entry.js?")}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}var __webpack_exports__=__webpack_require__("./webpack/entry.js")})();