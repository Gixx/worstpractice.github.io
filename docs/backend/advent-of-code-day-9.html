<!DOCTYPE html><html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Advent of Code - Day 9&nbsp;-&nbsp;Worst Practice
    </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <meta name="language" content="en">
    <meta name="robots" content="index,follow">
    <meta name="generator" content="jekyll 3.8.5">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="web">
    <meta name="copyright" content="Copyright © 2022 All rights reserved. Worst Practice.">
    <meta name="description" content="
">
    <meta name="subject" content="">
    <meta name="keywords" content="PHP, Advent of Code">
    <!-- facebook share -->
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Worst Practice">
    <meta property="og:title" content="Advent of Code - Day 9&nbsp;-&nbsp;Worst Practice
">
    <meta property="og:url" content="https://www.worstpractice.dev/backend/advent-of-code-day-9">
    <meta name="date" content="2022-12-09T13:45:00+00:00">
    <meta property="og:image" content="https://www.worstpractice.dev/assets/img/blog/2022/backend/advent-of-code-day-9/advent-9.jpg">
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="600">
    <meta property="og:description" content="The day I failed.">
    <meta property="fb:admins" content="ivan.gabor.80">
    <meta property="fb:app_id" content="2178081495757871">
    <meta property="og:type" content="article">
    <meta property="article:author" content="https://www.facebook.com/ivan.gabor.80">
    <meta property="article:published_time" content="2022-12-09T13:45:00+00:00">
    <meta property="article:tag" content="blog"/>
    <!-- twitter share -->
    <meta name="twitter:title" content="Advent of Code - Day 9">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@gaborivan1980">
    <meta name="twitter:description" content="The day I failed.">
    <meta name="twitter:image" content="https://www.worstpractice.dev/assets/img/blog/2022/backend/advent-of-code-day-9/advent-9_600x600.jpg">
    <link rel="canonical" href="https://www.worstpractice.dev">
    <link rel="alternate" type="application/rss+xml" title="Advent of Code - Day 9&nbsp;-&nbsp;Worst Practice
" href="/feed.xml">
    <link rel="alternate" hreflang="en" href="https://www.worstpractice.dev/backend/advent-of-code-day-9">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/icons/android-chrome-192x192.png">
    <link rel="manifest" href="/assets/img/icons/site.webmanifest">
    <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg" color="#C23F2F">
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#C23F2F">
    <meta name="msapplication-TileImage" content="/assets/img/icons/mstile-144x144.png">
    <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#C23F2F">
    <meta name="application-name" content="Worst Practice Blog">
    <meta name="HandheldFriendly" content="true">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#C23F2F">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:300,300i,400,400i,700,700i">
    <link rel="stylesheet" href="/assets/css/site.css">
    <script type="application/javascript" src="/assets/js/feature.min.js"></script>
    <script type="application/javascript">
      if (!feature.srcset) {
          window.location.href = '/sorry.html';
      }
    </script>
    <script type="application/javascript" src="/assets/js/site.min.js"></script>
  </head>
  <body>
    <header class="h-header">
      <h1 class="h-header__title"><a href="/">Worst Practice</a></h1>
    </header>
    <div class="codeOfTheDay">
      <input class="codeOfTheDay__toggle" type="checkbox">
      <div class="codeOfTheDay__content"></div>
      <div class="codeOfTheDay__monitor"></div>
      <div class="codeOfTheDay__backdrop"></div>
    </div>
    <div class="m-menu">
      <div class="m-menu__burger">
        <span></span>
      </div>
      <input class="m-menu__toggle" type="checkbox" />
      <div class="m-menu__content">
        <nav>
          <h2 class="m-menu__title">Worst Practice</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -home" href="/">Home</a></li>
          </ul>
        </nav>
        <nav>
          <h2 class="m-menu__title">Categories</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -backend -current" href="/backend">Backend</a></li>
            <li><a class="m-menu__link -devenv" href="/devenv">Development Environment</a></li>
            <li><a class="m-menu__link -frontend" href="/frontend">Frontend</a></li>
            <li><a class="m-menu__link -general
" href="/general
">General</a></li>
          </ul>
        </nav>
        <nav>
          <h2 class="m-menu__title">Tags</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -php" rel="tag" href="/tags/php/">PHP <sup>19</sup></a></li>
            <li><a class="m-menu__link -advent" rel="tag" href="/tags/advent/">Advent <sup>14</sup></a></li>
            <li><a class="m-menu__link -php74" rel="tag" href="/tags/php74/">PHP 7.4 <sup>4</sup></a></li>
          </ul>
          <a class="m-menu__link -more" href="/tags/">More</a>
        </nav>
        <nav>
          <h2 class="m-menu__title">Archive</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link " href="/archive/2022-12/">December, 2022</a></li>
            <li><a class="m-menu__link " href="/archive/2022-11/">November, 2022</a></li>
            <li><a class="m-menu__link " href="/archive/2022-10/">October, 2022</a></li>
          </ul>
          <a class="m-menu__link -more" href="/archive/">More</a>
        </nav>
        <nav>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link " href="/imprint.html">Imprint</a></li>
            <li><a class="m-menu__link " href="/terms.html">Terms of Use</a></li>
            <li><a class="m-menu__link " href="/privacy.html">Privacy Policy</a></li>
          </ul>
        </nav>
      </div>
      <div class="m-menu__backdrop"></div>
    </div>
    <main class="c-content">
      <section class="c-content__article">
        <article class="a-article">
          <header class="a-header">
            <h2 class="a-header__title">Advent of Code - Day 9</h2>
            <div class="a-header__meta">
              <p class="a-meta__date">Posted on December&nbsp; 9, 2022 @ 13:45
              </p>
              <p class="a-meta__category">Posted under the <a href="/backend/index.html">Backend</a> category</p>
              <p class="a-meta__level">Level: expert</p>
              <p class="a-meta__tags">Posted with the following tags:
                <a href="/tags/advent/index.html">#Advent</a>, 
                <a href="/tags/php/index.html">#PHP</a>
              </p>
            </div>
          </header>
          <p class="a-excerpt">
            The day I failed.
          </p>
          <figure class="a-illustration">
            <img class="a-illustration__image" src="/assets/img/post-illustration-placeholder.png" data-src="/assets/img/blog/2022/backend/advent-of-code-day-9/advent-9.jpg" alt="Advent of Code - Day 9">
            <figcaption class="a-illustration__caption">Calendar icon by <a target="_blank" rel="noopener" href="https://pixabay.com/users/pinwhalestock-13691058/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4623521">Kevin Sanderson</a> from <a target="_blank" rel="noopener" href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4623521">Pixabay</a></figcaption>
          </figure>
          <div class="a-body">
            <h3 id="the-input-data">The input data</h3>
            <p>A very basic data file:</p>
            <ul>
              <li>each row contains a character and a number separated by space</li>
              <li>the characters represent directions (up, right, down, left): <code class="language-plaintext highlighter-rouge">U</code>, <code class="language-plaintext highlighter-rouge">R</code>, <code class="language-plaintext highlighter-rouge">D</code>, <code class="language-plaintext highlighter-rouge">L</code></li>
              <li>the numbers represent the distance/step</li>
            </ul>
            <p>Task: we pull a rope in the given direction for the given distance, and we need to figure out,</p>
            <h3 id="part-one">Part one</h3>
            <p>I will be honest: it was tough. I went down to a super primitive level, and wrote a low-performing code just to do what
              needs to be done and get the right result. Currently, I am not even sure, whether my code is actually working well or just
              accidentally gives the right result.</p>
            <p>Should I share the code? Well, it’s definitely the worst practice.</p>
            <h3 id="part-two">Part two</h3>
            <p>I’m not proud of myself. This is the day I have to give up. I could pass part one, but this one requires skills that I 
              don’t have yet. I failed. I tried, but couldn’t figure out the algorithm. I tried to reuse the functions from the part one,
              but it was a complete failure as well. I’m too tired, sad and disappointed now to try again. I give up…</p>
            <p><a href="https://www.reddit.com/r/adventofcode/comments/zgq3nr/2022_day_9_rope_pull/" rel="noopener" target="_blank">This is how it should look like visualized.</a></p>
            <p>When I was thinking about the solution, I thought if I treat every knot as a rope-head for the next knot, it will work. But I
              couldn’t even reproduce the example outputs of the <a href="https://adventofcode.com/2022/day/9#part2" rel="noopener" target="_blank">task</a>.</p>
            <p>Maybe later I will re-try and update this article… But not today.</p>
            <h3 id="the-next-day">The next day</h3>
            <p>I was very upset that I couldn’t figure out the solution, so I spent my whole Saturday (10th of December) to find a solution.
              I analyzed the example in the puzzle description and watched that reddit video of the working solution a million times to
              understand the logic behind it. And then I just found it.</p>
            <p>The solution I made for the part one was a total dead end, no wonder why lead me to nowhere. Yes, it accidentally gave the 
              right result, but it was a disaster.</p>
            <p>The new, working code covers both part one and two, you need only change the value of the <code class="language-plaintext highlighter-rouge">ROPE_LENGTH</code> constant. I also 
              added a print function to be able to visualize the result. For the puzzle example, it will look something like this:</p>
            <figure class="a-illustration">
              <img class="a-illustration__image" src="/assets/img/post-illustration-placeholder.png" data-src="/assets/img/blog/2022/backend/advent-of-code-day-9/example.png" width="707" />
              <figcaption class="a-illustration__caption">Output sample of the rope pull puzzle.</figcaption>
            </figure>
            <h3 id="the-code">The Code</h3>
            <div class="language-php highlighter-rouge">
              <div class="highlight">
                <pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
</pre>
              </td>
              <td class="rouge-code">
                <pre><span class="k">const</span> <span class="no">ROPE_LENGTH</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="nv">$knotPositions</span> <span class="o">=</span> <span class="nb">array_fill</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="no">ROPE_LENGTH</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]);</span>
<span class="nv">$moves</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nv">$headX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$headY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$visitedByTail</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'0,0'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$minY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$maxY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$fn</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/input.txt'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">((</span><span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$fn</span><span class="p">,</span> <span class="mi">1024</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$line</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span>
        <span class="p">[</span><span class="nv">$direction</span><span class="p">,</span> <span class="nv">$steps</span><span class="p">]</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span> <span class="nv">$line</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$steps</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nv">$direction</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">case</span> <span class="s1">'U'</span><span class="o">:</span>
                    <span class="nv">$headY</span><span class="o">++</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">'R'</span><span class="o">:</span>
                    <span class="nv">$headX</span><span class="o">++</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">'D'</span><span class="o">:</span>
                    <span class="nv">$headY</span><span class="o">--</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">'L'</span><span class="o">:</span>
                    <span class="nv">$headX</span><span class="o">--</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nv">$knotPositions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$headX</span><span class="p">,</span> <span class="nv">$headY</span><span class="p">];</span>
            <span class="nv">$minY</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nv">$minY</span><span class="p">,</span> <span class="nv">$headY</span><span class="p">);</span>
            <span class="nv">$maxY</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nv">$maxY</span><span class="p">,</span> <span class="nv">$headY</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="nv">$j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="no">ROPE_LENGTH</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">moveKnot</span><span class="p">(</span><span class="nv">$j</span><span class="p">,</span> <span class="nv">$knotPositions</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nv">$coordinate</span> <span class="o">=</span> <span class="nv">$knotPositions</span><span class="p">[</span><span class="no">ROPE_LENGTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="mf">.</span><span class="s1">','</span><span class="mf">.</span><span class="nv">$knotPositions</span><span class="p">[</span><span class="no">ROPE_LENGTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$visitedByTail</span><span class="p">[</span><span class="nv">$coordinate</span><span class="p">]))</span> <span class="p">{</span>
                <span class="nv">$visitedByTail</span><span class="p">[</span><span class="nv">$coordinate</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nv">$visitedByTail</span><span class="p">[</span><span class="nv">$coordinate</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>

            <span class="nf">deleteLines</span><span class="p">(</span><span class="nv">$minY</span><span class="p">,</span> <span class="nv">$maxY</span><span class="p">);</span>
            <span class="nf">printStep</span><span class="p">(</span>
                <span class="n">moveIndex</span><span class="o">:</span> <span class="nv">$row</span><span class="p">,</span>
                <span class="n">stepIndex</span><span class="o">:</span> <span class="nv">$i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">direction</span><span class="o">:</span> <span class="nv">$direction</span><span class="p">,</span>
                <span class="n">knotPositions</span><span class="o">:</span> <span class="nv">$knotPositions</span><span class="p">,</span>
                <span class="n">visitedByTail</span><span class="o">:</span> <span class="nv">$visitedByTail</span><span class="p">,</span>
                <span class="n">minY</span><span class="o">:</span> <span class="nv">$minY</span><span class="p">,</span>
                <span class="n">maxY</span><span class="o">:</span> <span class="nv">$maxY</span>
            <span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">$row</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fn</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">function</span> <span class="n">moveKnot</span><span class="p">(</span><span class="kt">int</span> <span class="nv">$knotIndex</span><span class="p">,</span> <span class="kt">array</span> <span class="o">&amp;</span><span class="nv">$knotPositions</span><span class="p">):</span> <span class="kt">void</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nv">$currentTailX</span><span class="p">,</span> <span class="nv">$currentTailY</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$knotPositions</span><span class="p">[</span><span class="nv">$knotIndex</span><span class="p">];</span>
    <span class="p">[</span><span class="nv">$previousTailX</span><span class="p">,</span> <span class="nv">$previousTailY</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$knotPositions</span><span class="p">[</span><span class="nv">$knotIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>

    <span class="nv">$diffX</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nv">$previousTailX</span> <span class="o">-</span> <span class="nv">$currentTailX</span><span class="p">);</span>
    <span class="nv">$diffY</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nv">$previousTailY</span> <span class="o">-</span> <span class="nv">$currentTailY</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$diffX</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nv">$diffY</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$currentTailX</span> <span class="o">+=</span> <span class="p">(</span><span class="nv">$diffX</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$diffY</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="o">?</span> <span class="mi">0</span>
        <span class="o">:</span> <span class="p">(</span><span class="nv">$previousTailX</span> <span class="o">-</span> <span class="nv">$currentTailX</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

    <span class="nv">$currentTailY</span> <span class="o">+=</span> <span class="p">(</span><span class="nv">$diffX</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nv">$diffY</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">?</span> <span class="mi">0</span>
        <span class="o">:</span> <span class="p">(</span><span class="nv">$previousTailY</span> <span class="o">-</span> <span class="nv">$currentTailY</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

    <span class="nv">$knotPositions</span><span class="p">[</span><span class="nv">$knotIndex</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$currentTailX</span><span class="p">,</span> <span class="nv">$currentTailY</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">deleteLines</span><span class="p">(</span><span class="kt">int</span> <span class="nv">$minY</span><span class="p">,</span> <span class="kt">int</span> <span class="nv">$maxY</span><span class="p">):</span> <span class="kt">void</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nv">$maxY</span> <span class="o">+</span><span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="nv">$y</span> <span class="o">&gt;=</span> <span class="nb">min</span><span class="p">(</span><span class="nv">$minY</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nv">$y</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"</span><span class="se">\r\x1b</span><span class="s2">[K"</span><span class="p">;</span> <span class="c1">// remove this line</span>
        <span class="k">echo</span> <span class="s2">"</span><span class="se">\033</span><span class="s2">[1A</span><span class="se">\033</span><span class="s2">[K"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">printStep</span><span class="p">(</span>
    <span class="kt">int</span> <span class="nv">$moveIndex</span><span class="p">,</span>
    <span class="kt">int</span> <span class="nv">$stepIndex</span><span class="p">,</span>
    <span class="kt">string</span> <span class="nv">$direction</span><span class="p">,</span>
    <span class="kt">array</span> <span class="nv">$knotPositions</span><span class="p">,</span>
    <span class="kt">array</span> <span class="nv">$visitedByTail</span><span class="p">,</span>
    <span class="kt">int</span> <span class="nv">$minY</span><span class="p">,</span>
    <span class="kt">int</span> <span class="nv">$maxY</span>
<span class="p">):</span> <span class="kt">void</span> <span class="p">{</span>
    <span class="nv">$matrix</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="c1">// Prepare matrix</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nv">$maxY</span> <span class="o">+</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="nv">$y</span> <span class="o">&gt;=</span> <span class="nb">min</span><span class="p">(</span><span class="nv">$minY</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">);</span> <span class="nv">$y</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">180</span><span class="p">;</span> <span class="nv">$x</span> <span class="o">&lt;=</span> <span class="mi">40</span><span class="p">;</span> <span class="nv">$x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$matrix</span><span class="p">[</span><span class="nv">$y</span><span class="p">][</span><span class="nv">$x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' '</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$y</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$matrix</span><span class="p">[</span><span class="nv">$y</span><span class="p">][</span><span class="nv">$x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'─'</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$matrix</span><span class="p">[</span><span class="nv">$y</span><span class="p">][</span><span class="nv">$x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'|'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$visitedByTail</span> <span class="k">as</span> <span class="nv">$coordinate</span> <span class="o">=&gt;</span> <span class="nv">$times</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">[</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="nv">$coordinate</span><span class="p">);</span>
        <span class="nv">$matrix</span><span class="p">[</span><span class="nv">$y</span><span class="p">][</span><span class="nv">$x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'.'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Place markers</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="no">ROPE_LENGTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$sign</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">'H'</span> <span class="o">:</span> <span class="nv">$i</span><span class="p">;</span>
        <span class="nv">$matrix</span><span class="p">[</span><span class="nv">$knotPositions</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="nv">$knotPositions</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nv">$sign</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">echo</span> <span class="s2">"Move #</span><span class="nv">$moveIndex</span><span class="s2"> | Step #</span><span class="nv">$stepIndex</span><span class="s2"> into </span><span class="nv">$direction</span><span class="s2">"</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$matrix</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nb">str_pad</span><span class="p">(</span><span class="nv">$index</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="no">STR_PAD_LEFT</span><span class="p">)</span><span class="mf">.</span><span class="s1">'. '</span><span class="mf">.</span><span class="nb">implode</span><span class="p">(</span><span class="nv">$row</span><span class="p">)</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">echo</span> <span class="s1">'      '</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">180</span><span class="p">;</span> <span class="nv">$x</span> <span class="o">&lt;=</span> <span class="mi">40</span><span class="p">;</span> <span class="nv">$x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'|'</span> <span class="o">:</span> <span class="s2">"'"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">echo</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

    <span class="nb">usleep</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$visitedByTail</span><span class="p">)</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>
</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </code></pre>
  </div>
</div>
</div>
<footer class="a-footer">
  <h3 class="a-footer__title">About the author</h3>
  <a class="a-footer__avatar" href="/author/gabor.ivan/index.html"><img src="/author/gabor.ivan/avatar.jpg" alt="Gábor Iván"></a>
  <p class="a-footer__author">
    Hi, my name is Gábor Iván. I am an old-school Full stack developer, which means I deal with Backend (PHP), Frontend (HTML, CSS, JS), and a little bit of Webdesign. No DevOPS, sorry.
    <br>
    <a href="/author/gabor.ivan/index.html">Read the full story</a>
  </p>
</footer>
</article>
<aside class="a-comments">
  <header class="a-comments__title">
    <h4>It's time to judge me!</h4>
  </header>
  <div id="general">
    There's no embedded tool to judge me in public. But don't worry, you can
    <a class="mailto" href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#119;&#111;&#114;&#115;&#116;&#46;&#112;&#114;&#97;&#99;&#116;&#105;&#99;&#101;&#46;&#98;&#108;&#111;&#103;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;?subject=Judgement on `Advent of Code - Day 9`" target="_blank" rel="noopener" rel="noopener noreferrer">write me</a>
    your opinions/ideas/suggestions in email. Please don't forget to reference the page in the message.
  </div>
</aside>
</section>
</main>
<footer class="f-footer">
  <p class="f-footer__copyright">
    <small>Copyright © 2022 All rights reserved. Worst Practice</small>
  </p>
</footer>
</body>
</html>