<!DOCTYPE html><html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Advent of Code - Day 13&nbsp;-&nbsp;Worst Practice
    </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <meta name="language" content="en">
    <meta name="robots" content="index,follow">
    <meta name="generator" content="jekyll 3.8.5">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="web">
    <meta name="copyright" content="Copyright © 2022 All rights reserved. Worst Practice.">
    <meta name="description" content="
">
    <meta name="subject" content="">
    <meta name="keywords" content="PHP, Advent of Code">
    <!-- facebook share -->
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Worst Practice">
    <meta property="og:title" content="Advent of Code - Day 13&nbsp;-&nbsp;Worst Practice
">
    <meta property="og:url" content="https://www.worstpractice.dev/backend/advent-of-code-day-13">
    <meta name="date" content="2022-12-13T11:40:00+00:00">
    <meta property="og:image" content="https://www.worstpractice.dev/assets/img/blog/2022/backend/advent-of-code-day-13/advent-13.jpg">
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="600">
    <meta property="og:description" content="One of the first algorithm in programming you have to learn is sorting.">
    <meta property="fb:admins" content="ivan.gabor.80">
    <meta property="fb:app_id" content="2178081495757871">
    <meta property="og:type" content="article">
    <meta property="article:author" content="https://www.facebook.com/ivan.gabor.80">
    <meta property="article:published_time" content="2022-12-13T11:40:00+00:00">
    <meta property="article:tag" content="blog"/>
    <!-- twitter share -->
    <meta name="twitter:title" content="Advent of Code - Day 13">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@gaborivan1980">
    <meta name="twitter:description" content="One of the first algorithm in programming you have to learn is sorting.">
    <meta name="twitter:image" content="https://www.worstpractice.dev/assets/img/blog/2022/backend/advent-of-code-day-13/advent-13_600x600.jpg">
    <link rel="canonical" href="https://www.worstpractice.dev">
    <link rel="alternate" type="application/rss+xml" title="Advent of Code - Day 13&nbsp;-&nbsp;Worst Practice
" href="/feed.xml">
    <link rel="alternate" hreflang="en" href="https://www.worstpractice.dev/backend/advent-of-code-day-13">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/icons/android-chrome-192x192.png">
    <link rel="manifest" href="/assets/img/icons/site.webmanifest">
    <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg" color="#C23F2F">
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#C23F2F">
    <meta name="msapplication-TileImage" content="/assets/img/icons/mstile-144x144.png">
    <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#C23F2F">
    <meta name="application-name" content="Worst Practice Blog">
    <meta name="HandheldFriendly" content="true">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#C23F2F">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:300,300i,400,400i,700,700i">
    <link rel="stylesheet" href="/assets/css/site.css">
    <script type="application/javascript" src="/assets/js/feature.min.js"></script>
    <script type="application/javascript">
      if (!feature.srcset) {
          window.location.href = '/sorry.html';
      }
    </script>
    <script type="application/javascript" src="/assets/js/site.min.js"></script>
  </head>
  <body>
    <header class="h-header">
      <h1 class="h-header__title"><a href="/">Worst Practice</a></h1>
    </header>
    <div class="codeOfTheDay">
      <input class="codeOfTheDay__toggle" type="checkbox">
      <div class="codeOfTheDay__content"></div>
      <div class="codeOfTheDay__monitor"></div>
      <div class="codeOfTheDay__backdrop"></div>
    </div>
    <div class="m-menu">
      <div class="m-menu__burger">
        <span></span>
      </div>
      <input class="m-menu__toggle" type="checkbox" />
      <div class="m-menu__content">
        <nav>
          <h2 class="m-menu__title">Worst Practice</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -home" href="/">Home</a></li>
          </ul>
        </nav>
        <nav>
          <h2 class="m-menu__title">Categories</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -general" href="/general">General</a></li>
            <li><a class="m-menu__link -backend -current" href="/backend">Backend</a></li>
            <li><a class="m-menu__link -devenv" href="/devenv">Development Environment</a></li>
            <li><a class="m-menu__link -frontend" href="/frontend">Frontend</a></li>
            <li><a class="m-menu__link -general
" href="/general
">General</a></li>
          </ul>
        </nav>
        <nav>
          <h2 class="m-menu__title">Tags</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link -php" rel="tag" href="/tags/php/">PHP <sup>20</sup></a></li>
            <li><a class="m-menu__link -advent" rel="tag" href="/tags/advent/">Advent <sup>15</sup></a></li>
            <li><a class="m-menu__link -php74" rel="tag" href="/tags/php74/">PHP 7.4 <sup>4</sup></a></li>
          </ul>
          <a class="m-menu__link -more" href="/tags/">More</a>
        </nav>
        <nav>
          <h2 class="m-menu__title">Archive</h2>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link " href="/archive/2022-12/">December, 2022</a></li>
            <li><a class="m-menu__link " href="/archive/2022-11/">November, 2022</a></li>
            <li><a class="m-menu__link " href="/archive/2022-10/">October, 2022</a></li>
          </ul>
          <a class="m-menu__link -more" href="/archive/">More</a>
        </nav>
        <nav>
          <ul class="m-menu__navigation">
            <li><a class="m-menu__link " href="/imprint.html">Imprint</a></li>
            <li><a class="m-menu__link " href="/terms.html">Terms of Use</a></li>
            <li><a class="m-menu__link " href="/privacy.html">Privacy Policy</a></li>
          </ul>
        </nav>
      </div>
      <div class="m-menu__backdrop"></div>
    </div>
    <main class="c-content">
      <section class="c-content__article">
        <article class="a-article">
          <header class="a-header">
            <h2 class="a-header__title">Advent of Code - Day 13</h2>
            <div class="a-header__meta">
              <p class="a-meta__date">Posted on December&nbsp;13, 2022 @ 11:40
              </p>
              <p class="a-meta__category">Posted under the <a href="/backend/index.html">Backend</a> category</p>
              <p class="a-meta__level">Level: beginner</p>
              <p class="a-meta__tags">Posted with the following tags:
                <a href="/tags/advent/index.html">#Advent</a>, 
                <a href="/tags/php/index.html">#PHP</a>
              </p>
            </div>
          </header>
          <p class="a-excerpt">
            One of the first algorithm in programming you have to learn is sorting.
          </p>
          <figure class="a-illustration">
            <img class="a-illustration__image" src="/assets/img/post-illustration-placeholder.png" data-src="/assets/img/blog/2022/backend/advent-of-code-day-13/advent-13.jpg" alt="Advent of Code - Day 13">
            <figcaption class="a-illustration__caption">Calendar icon by <a target="_blank" rel="noopener" href="https://pixabay.com/users/pinwhalestock-13691058/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4623521">Kevin Sanderson</a> from <a target="_blank" rel="noopener" href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4623521">Pixabay</a></figcaption>
          </figure>
          <div class="a-body">
            <p><a href="https://adventofcode.com/2022/day/13" rel="noopener" target="_blank">Today’s puzzle</a> in short: compare &amp; sort.</p>
            <h3 id="the-input-data">The input data</h3>
            <p>In the input file today we get a spooky, datastructure-like strings:</p>
            <ul>
              <li>Each line starts with <code class="language-plaintext highlighter-rouge">[</code> and ends with <code class="language-plaintext highlighter-rouge">]</code>.</li>
              <li>Between the sides there can be number separated by comma and encapsulated within square brackets.</li>
              <li>The square brackets are in pairs so the number of <code class="language-plaintext highlighter-rouge">[</code> equals to the number of <code class="language-plaintext highlighter-rouge">]</code>.</li>
              <li>It’s possible to have empty square bracket pairs (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
              <li>Every third line is an empty line.</li>
            </ul>
            <h4 id="game-rules">Game rules</h4>
            <p>We need to compare values between lines to determine if the line above is smaller than the line below.</p>
            <h3 id="part-one">Part one</h3>
            <p>In part one, we have different game rules, so I present them here:</p>
            <ul>
              <li>We take every two rows as a group.</li>
              <li>Groups are counted from 1.</li>
              <li>Groups are separated by the empty line.</li>
              <li>We need to check every group if the first member is “smaller” than the second one. If the first member is smaller, we 
                increment a counter with the group’s index.</li>
            </ul>
            <p>Saying one of them is “smaller” depends on our algorithm. So let’s see it:</p>
            <div class="language-php highlighter-rouge">
              <div class="highlight">
                <pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
</pre>
              </td>
              <td class="rouge-code">
                <pre><span class="nv">$pairs</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nv">$pairIndex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$rightOrderPairIndexSum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$fn</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/input.txt'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">((</span><span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$fn</span><span class="p">,</span> <span class="mi">1024</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$line</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">empty</span><span class="p">(</span><span class="nv">$line</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">$pairs</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$line</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$pairs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$left</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">'[]'</span><span class="p">,</span> <span class="s1">'[null]'</span><span class="p">,</span><span class="nv">$pairs</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
            <span class="nv">$right</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">'[]'</span><span class="p">,</span> <span class="s1">'[null]'</span><span class="p">,</span><span class="nv">$pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
            <span class="nv">$result</span> <span class="o">=</span> <span class="nf">comparePairs</span><span class="p">(</span> <span class="nv">$left</span><span class="p">,</span> <span class="nv">$right</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$rightOrderPairIndexSum</span> <span class="o">+=</span> <span class="nv">$pairIndex</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$pairs</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nv">$pairIndex</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fn</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">comparePairs</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$left</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$right</span><span class="p">):</span> <span class="kt">int</span>
<span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$left</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$leftValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$leftValue</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$right</span><span class="p">[</span><span class="nv">$index</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">$rightValue</span> <span class="o">=</span> <span class="nv">$right</span><span class="p">[</span><span class="nv">$index</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$leftValue</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$rightValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$rightValue</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$rightValue</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$leftValue</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span><span class="nv">$rightValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$leftValue</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$leftValue</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$leftValue</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span><span class="nv">$rightValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">=</span> <span class="nf">comparePairs</span><span class="p">(</span><span class="nv">$leftValue</span><span class="p">,</span> <span class="nv">$rightValue</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$leftValue</span> <span class="o">==</span> <span class="nv">$rightValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$leftValue</span> <span class="o">&lt;</span> <span class="nv">$rightValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$leftValue</span> <span class="o">&gt;</span> <span class="nv">$rightValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$right</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nv">$rightOrderPairIndexSum</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>
</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </code></pre>
  </div>
</div>
<p>The trick part was in this puzzle, that the line almost looks like a JSON string. The only issue is the empty square brackets.
  But since these are strings, we can fix it by replacing every <code class="language-plaintext highlighter-rouge">[]</code> with <code class="language-plaintext highlighter-rouge">[null]</code>, and there you go: We have a JSON!</p>
<p>From this point is just a simple recursive function and a loop. The function always gets two arrays to compare. Then it
  starts a loop on the first parameter (making it the <code class="language-plaintext highlighter-rouge">left</code>) to compare the values:</p>
<ul>
  <li>If left-side value is <code class="language-plaintext highlighter-rouge">null</code>, that means originally there was an <code class="language-plaintext highlighter-rouge">[]</code>. Left is smaller, return <code class="language-plaintext highlighter-rouge">-1</code>.</li>
  <li>If the right-side pair does not exist, then the left is bigger, return <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>If any of the left or right values is an array, while the other is a literal, we convert the literal into an array.</li>
  <li>If both values are arrays, we recursively call the compare function with these values and if it returns with <code class="language-plaintext highlighter-rouge">0</code>, we 
    continue the compare, otherwise we return what it returns (either <code class="language-plaintext highlighter-rouge">1</code> or <code class="language-plaintext highlighter-rouge">-1</code>).</li>
  <li>If both values are literals, and they are equal to each other, we continue the compare.</li>
  <li>If left is smaller, return <code class="language-plaintext highlighter-rouge">-1</code>.</li>
  <li>If right is smaller, return <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>If we reach the end of the loop, and we see the size of the parameter is smaller, than the second’s, it means, left is
    smaller, return <code class="language-plaintext highlighter-rouge">-1</code>.</li>
  <li>If we didn’t return so far, the values should be equal, return <code class="language-plaintext highlighter-rouge">0</code>.</li>
</ul>
<h3 id="part-two">Part two</h3>
<p>Now we have a quite different game rule, however the code will hardly change.</p>
<ul>
  <li>We have to add two extra lines to the input: these will be the distress signal codes.</li>
  <li>We have to ignore the empty lines.</li>
  <li>We need to sort every line with the two new lines included.</li>
  <li>We have to check where are the distress signal codes now and multiply their indexes.</li>
  <li>The line indexing starts from 1.</li>
</ul>
<p>Luckily I instinctively wrote the <code class="language-plaintext highlighter-rouge">comparePairs()</code> function returns <code class="language-plaintext highlighter-rouge">-1</code>, <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>. With 20+ years of experience, this
  just came naturally. And what a luck! Now we have to sort all the lines, the PHP’s <code class="language-plaintext highlighter-rouge">usort()</code> function requires exactly a
  custom function that returns <code class="language-plaintext highlighter-rouge">-1</code>, <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>. So this time we have to change only the surrounding codes:</p>
<div class="language-php highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre>
  </td>
  <td class="rouge-code">
    <pre><span class="cp">&lt;?php</span>

<span class="nv">$lines</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'[[2]]'</span><span class="p">,</span>
    <span class="s1">'[[6]]'</span>
<span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$fn</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/input.txt'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">((</span><span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$fn</span><span class="p">,</span> <span class="mi">1024</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$line</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">empty</span><span class="p">(</span><span class="nv">$line</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">$lines</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$line</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fn</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">compare</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$a</span><span class="p">,</span> <span class="kt">string</span> <span class="nv">$b</span><span class="p">):</span> <span class="kt">int</span>
<span class="p">{</span>
    <span class="nv">$left</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">'[]'</span><span class="p">,</span> <span class="s1">'[null]'</span><span class="p">,</span><span class="nv">$a</span><span class="p">));</span>
    <span class="nv">$right</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">'[]'</span><span class="p">,</span> <span class="s1">'[null]'</span><span class="p">,</span><span class="nv">$b</span><span class="p">));</span>

    <span class="k">return</span> <span class="nf">comparePairs</span><span class="p">(</span><span class="nv">$left</span><span class="p">,</span> <span class="nv">$right</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">comparePairs</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$left</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$right</span><span class="p">):</span> <span class="kt">int</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="nb">usort</span><span class="p">(</span><span class="nv">$lines</span><span class="p">,</span> <span class="s1">'compare'</span><span class="p">);</span>

<span class="nv">$key1</span> <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span><span class="s1">'[[2]]'</span><span class="p">,</span> <span class="nv">$lines</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$key2</span> <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span><span class="s1">'[[6]]'</span><span class="p">,</span> <span class="nv">$lines</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">echo</span> <span class="p">(</span><span class="nv">$key1</span> <span class="o">*</span>  <span class="nv">$key2</span><span class="p">)</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>
</pre>
  </td>
</tr>
</tbody>
</table>
</code></pre>
</div>
</div>
<p>As you can see, I didn’t change the input file, instead I initialized the “line collection” array with the two new lines.
  Then, when we read the input, we skip all the empty lines, and add the rest to this collection.</p>
<p>I created a wrapper function called <code class="language-plaintext highlighter-rouge">compare</code>, to prepare the left- and right-side values before call our original <code class="language-plaintext highlighter-rouge">comparePairs()</code>.
  Of course, I could - and maybe I should - write it as an anonymous function as the second parameter of the <code class="language-plaintext highlighter-rouge">usort()</code>, but
  I like naming things.</p>
<p>The <code class="language-plaintext highlighter-rouge">usort()</code> will do the heavy job of sorting, then the <code class="language-plaintext highlighter-rouge">array_search</code> will get the indexes, that we need to solve the 
  puzzle.</p>
</div>
<footer class="a-footer">
  <h3 class="a-footer__title">About the author</h3>
  <a class="a-footer__avatar" href="/author/gabor.ivan/index.html"><img src="/author/gabor.ivan/avatar.jpg" alt="Gábor Iván"></a>
  <p class="a-footer__author">
    Hi, my name is Gábor Iván. I am an old-school Full stack developer, which means I deal with Backend (PHP), Frontend (HTML, CSS, JS), and a little bit of Webdesign. No DevOPS, sorry.
    <br>
    <a href="/author/gabor.ivan/index.html">Read the full story</a>
  </p>
</footer>
</article>
<aside class="a-comments">
  <header class="a-comments__title">
    <h4>It's time to judge me!</h4>
  </header>
  <div id="general">
    There's no embedded tool to judge me in public. But don't worry, you can
    <a class="mailto" href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#119;&#111;&#114;&#115;&#116;&#46;&#112;&#114;&#97;&#99;&#116;&#105;&#99;&#101;&#46;&#98;&#108;&#111;&#103;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;?subject=Judgement on `Advent of Code - Day 13`" target="_blank" rel="noopener" rel="noopener noreferrer">write me</a>
    your opinions/ideas/suggestions in email. Please don't forget to reference the page in the message.
  </div>
</aside>
</section>
</main>
<footer class="f-footer">
  <p class="f-footer__copyright">
    <small>Copyright © 2023 All rights reserved. Worst Practice</small>
  </p>
</footer>
</body>
</html>