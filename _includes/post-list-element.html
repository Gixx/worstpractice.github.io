{%- include variables.html -%}
{%- assign post = include.post -%}
<section>
    <article class="l-article">
        <header class="l-header">
            <h3 class="l-header__title"><a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a></h3>
            <p class="l-header__author">
                <a class="author-avatar" href="/author/{{ post.author_slug | default: site.author_slug }}/index.html"><img src="{{ post.author_avatar | default: site.author_avatar }}" alt="{{ post.author | default: site.author }}"></a>
                <span class="author-name"><a href="/author/{{ post.author_slug | default: site.author_slug }}/index.html">{{ post.author | default: site.author }}</a></span>
            </p>
            <div class="l-header__meta">
                {%- assign m = post.date | date: "%-m" | minus: 0 -%}
                {%- assign postMonth = site.data[site.lang].months[m] -%}
                {%- capture postDate  -%}
                    {{ postMonth }}&nbsp;{{ post.date | date: '%e' }}, {{ post.date | date: '%Y' }} {{ post.date | date: '%R' }}
                {%- endcapture -%}
                <p class="l-meta__date">Posted on {{ postDate }}</p>
                {%- unless post.expiration == "none" -%}
                    {%- assign em = post.expiration | date: "%-m" | minus: 0 -%}
                    {%- assign expirationMonth = site.data[site.lang].months[em] -%}
                    {%- capture expirationDate  -%}
                        {{ expirationMonth }}&nbsp;{{ post.expiration | date: '%e' }}, {{ post.expiration | date: '%Y' }}
                    {%- endcapture -%}
                <p class="l-meta__expiration">Estimated date of expiration: {{ expirationDate }}</p>
                {%- endunless -%}
                <p class="l-meta__category">Posted under the <a href="/{{ post.category}}/index.html">{{ post.categoryLabel }}</a> category</p>
                <p class="l-meta__tags">Posted with the following tags:
                {% for tag in post.tags %}
                    <a href="/tags/{{ tag }}/index.html">#{{ post.tagLabels[forloop.index0] }}</a>{% unless forloop.last %}, {% endunless %}
                {% endfor %}
                </p>
            </div>
        </header>

        {%- if post.illustration != '' -%}
        <figure class="l-illustration">
            <img class="l-illustration__image" src="/assets/img/post-illustration-placeholder.jpg" data-src="/assets/img/blog/{{ post.date | date: '%Y' }}/{{ post.illustration }}" alt="{{ post.title | escape }}">
            {%- if post.illustration-caption != '' -%}
            <figcaption class="l-illustration__caption">{{ post.illustrationCaption }}</figcaption>
            {%- endif -%}
        </figure>
        {%- endif -%}
        <p class="l-excerpt">
            {{ post.excerpt }}
        </p>
    </article>
</section>

